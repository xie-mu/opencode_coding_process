# Music Vocal Concert æµ‹è¯•ä¸è´¨é‡é—¨ç¦

## 1. æµ‹è¯•ç­–ç•¥

### 1.1 æµ‹è¯•é‡‘å­—å¡”

```mermaid
graph TD
    A[ç«¯åˆ°ç«¯æµ‹è¯•] -->|10%| B[é›†æˆæµ‹è¯•]
    B -->|30%| C[å•å…ƒæµ‹è¯•]
    C -->|60%| D[ä»£ç å®¡æŸ¥]
```

### 1.2 æµ‹è¯•ç±»å‹

#### 1.2.1 å•å…ƒæµ‹è¯•
- **è¦†ç›–ç‡ç›®æ ‡**: >85%
- **æ‰§è¡Œæ—¶é—´**: <5åˆ†é’Ÿ
- **å·¥å…·**: pytest, Jest

#### 1.2.2 é›†æˆæµ‹è¯•
- **è¦†ç›–ç‡ç›®æ ‡**: >80%
- **æ‰§è¡Œæ—¶é—´**: <15åˆ†é’Ÿ
- **å·¥å…·**: pytest, Supertest

#### 1.2.3 ç«¯åˆ°ç«¯æµ‹è¯•
- **è¦†ç›–ç‡ç›®æ ‡**: >75%
- **æ‰§è¡Œæ—¶é—´**: <30åˆ†é’Ÿ
- **å·¥å…·**: Cypress, Playwright

#### 1.2.4 æ€§èƒ½æµ‹è¯•
- **å“åº”æ—¶é—´**: <200ms
- **ååé‡**: >1000 req/s
- **å·¥å…·**: JMeter, k6

### 1.3 æµ‹è¯•ç¯å¢ƒ

| ç¯å¢ƒ | é…ç½® | ç”¨é€” | è®¿é—®æƒé™ |
|------|------|------|----------|
| å¼€å‘ç¯å¢ƒ | æœ¬åœ°å¼€å‘ | æ—¥å¸¸å¼€å‘ | å¼€å‘äººå‘˜ |
| æµ‹è¯•ç¯å¢ƒ | 4æ ¸8G, 50Gå­˜å‚¨ | æµ‹è¯•éªŒè¯ | æµ‹è¯•äººå‘˜ |
| é¢„ç”Ÿäº§ç¯å¢ƒ | 8æ ¸16G, 100Gå­˜å‚¨ | ç”Ÿäº§éªŒè¯ | å…¨ä½“äººå‘˜ |
| ç”Ÿäº§ç¯å¢ƒ | 16æ ¸32G, 200Gå­˜å‚¨ | æ­£å¼è¿è¡Œ | ç”Ÿäº§ç”¨æˆ· |

## 2. è´¨é‡é—¨ç¦

### 2.1 ä»£ç è´¨é‡é—¨ç¦

#### 2.1.1 ä»£ç è¦†ç›–ç‡
```bash
# ä»£ç è¦†ç›–ç‡æ£€æŸ¥
# Python
pytest --cov=src --cov-report=html --cov-fail-under=85

# JavaScript
npm test -- --coverage --coverage-threshold='85%'

# è¦†ç›–ç‡æŠ¥å‘Š
# ç”ŸæˆHTMLæŠ¥å‘Š
pytest --cov=src --cov-report=html
# ç”ŸæˆXMLæŠ¥å‘Š
pytest --cov=src --cov-report=xml
```

#### 2.1.2 ä»£ç å¤æ‚åº¦
```bash
# ä»£ç å¤æ‚åº¦æ£€æŸ¥
# Python
radon cc src/ --min C --exclude tests/

# JavaScript
eslint --rule 'complexity: ["error", 10]'

# å¤æ‚åº¦æ ‡å‡†
# Açº§: 1-10 (ä¼˜ç§€)
# Bçº§: 11-20 (è‰¯å¥½)
# Cçº§: 21-30 (ä¸€èˆ¬)
# Dçº§: 31+ (éœ€è¦ä¼˜åŒ–)
```

#### 2.1.3 ä»£ç è§„èŒƒ
```bash
# ä»£ç è§„èŒƒæ£€æŸ¥
# Python
flake8 src/
black --check src/
isort --check-only src/

# JavaScript
eslint src/
prettier --check src/

# è§„èŒƒæ ‡å‡†
# 0ä¸ªä¸¥é‡é”™è¯¯
# 0ä¸ªè­¦å‘Š
# 0ä¸ªæç¤º
```

#### 2.1.4 å®‰å…¨æ¼æ´
```bash
# å®‰å…¨æ¼æ´æ£€æŸ¥
# Python
bandit -r src/
safety check -r requirements.txt

# JavaScript
npm audit
npm audit fix

# æ¼æ´æ ‡å‡†
# 0ä¸ªé«˜å±æ¼æ´
# 0ä¸ªä¸­å±æ¼æ´
# æœ€å¤š1ä¸ªä½å±æ¼æ´
```

### 2.2 æ„å»ºè´¨é‡é—¨ç¦

#### 2.2.1 æ„å»ºæˆåŠŸ
```bash
# æ„å»ºæ£€æŸ¥
# ç¼–è¯‘æˆåŠŸ
npm run build
# æˆ–
python setup.py build

# æ„å»ºæ ‡å‡†
# ç¼–è¯‘æ— é”™è¯¯
# æ‰“åŒ…æˆåŠŸ
# é•œåƒæ„å»ºæˆåŠŸ
```

#### 2.2.2 ä¾èµ–å®‰å…¨
```bash
# ä¾èµ–å®‰å…¨æ£€æŸ¥
# Python
pip-audit --format json --output audit-report.json

# JavaScript
npm audit --audit-level=moderate

# ä¾èµ–æ ‡å‡†
# 0ä¸ªé«˜å±ä¾èµ–
# 0ä¸ªä¸­å±ä¾èµ–
# æœ€å¤š2ä¸ªä½å±ä¾èµ–
```

#### 2.2.3 ä»£ç é‡å¤
```bash
# ä»£ç é‡å¤æ£€æŸ¥
# Python
radon mi -s src/
# JavaScript
npx jscpd src/

# é‡å¤æ ‡å‡†
# é‡å¤ç‡ < 5%
```

### 2.3 éƒ¨ç½²è´¨é‡é—¨ç¦

#### 2.3.1 éƒ¨ç½²éªŒè¯
```bash
# éƒ¨ç½²éªŒè¯
# å¥åº·æ£€æŸ¥
curl -f http://localhost:8000/health

# åŠŸèƒ½æ£€æŸ¥
curl -f http://localhost:8000/api/concerts

# éƒ¨ç½²æ ‡å‡†
# å¥åº·æ£€æŸ¥é€šè¿‡
# åŠŸèƒ½æµ‹è¯•é€šè¿‡
# å“åº”æ—¶é—´ < 200ms
```

#### 2.3.2 æ€§èƒ½æµ‹è¯•
```bash
# æ€§èƒ½æµ‹è¯•
# ä½¿ç”¨k6
k6 run load-test.js

# æ€§èƒ½æµ‹è¯•æ ‡å‡†
# å“åº”æ—¶é—´ < 200ms
# é”™è¯¯ç‡ < 1%
# ååé‡ > 1000 req/s
```

#### 2.3.3 å®‰å…¨æ‰«æ
```bash
# å®‰å…¨æ‰«æ
# ä½¿ç”¨Trivy
trivy image music-vocal-concert:latest

# å®‰å…¨æ‰«ææ ‡å‡†
# 0ä¸ªé«˜å±æ¼æ´
# 0ä¸ªä¸­å±æ¼æ´
# æœ€å¤š1ä¸ªä½å±æ¼æ´
```

## 3. æµ‹è¯•ç”¨ä¾‹

### 3.1 å•å…ƒæµ‹è¯•

#### 3.1.1 æ¼”å”±ä¼šæœåŠ¡æµ‹è¯•
```python
# tests/test_concert_service.py
import pytest
from unittest.mock import Mock, AsyncMock
from src.api.services.concert_service import ConcertService

@pytest.fixture
def mock_db_session():
    return AsyncMock()

@pytest.fixture
def concert_service(mock_db_session):
    service = ConcertService()
    service.db_session = mock_db_session
    return service

@pytest.mark.asyncio
async def test_get_concerts_success(concert_service, mock_db_session):
    """æµ‹è¯•è·å–æ¼”å”±ä¼šåˆ—è¡¨æˆåŠŸ"""
    # æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢ç»“æœ
    mock_result = AsyncMock()
    mock_result.scalars.return_value.all.return_value = [
        {'id': 1, 'name': 'æ¼”å”±ä¼š1'},
        {'id': 2, 'name': 'æ¼”å”±ä¼š2'}
    ]
    
    mock_db_session.execute.return_value = mock_result
    
    concerts = await concert_service.get_concerts()
    
    assert len(concerts) == 2
    assert concerts[0]['name'] == 'æ¼”å”±ä¼š1'
    assert concerts[1]['name'] == 'æ¼”å”±ä¼š2'

@pytest.mark.asyncio
async def test_get_concerts_with_filters(concert_service, mock_db_session):
    """æµ‹è¯•å¸¦è¿‡æ»¤æ¡ä»¶çš„è·å–æ¼”å”±ä¼šåˆ—è¡¨"""
    # æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢ç»“æœ
    mock_result = AsyncMock()
    mock_result.scalars.return_value.all.return_value = [
        {'id': 1, 'name': 'åŒ—äº¬æ¼”å”±ä¼š'}
    ]
    
    mock_db_session.execute.return_value = mock_result
    
    concerts = await concert_service.get_concerts(city='åŒ—äº¬')
    
    assert len(concerts) == 1
    assert concerts[0]['name'] == 'åŒ—äº¬æ¼”å”±ä¼š'
    # éªŒè¯æŸ¥è¯¢æ¡ä»¶
    mock_db_session.execute.assert_called_once()
```

#### 3.1.2 APIæ¥å£æµ‹è¯•
```python
# tests/test_api.py
from fastapi.testclient import TestClient
from src.api.main import app

client = TestClient(app)

def test_get_concerts():
    """æµ‹è¯•è·å–æ¼”å”±ä¼šåˆ—è¡¨API"""
    response = client.get("/api/concerts")
    assert response.status_code == 200
    assert response.json() == []

def test_create_concert():
    """æµ‹è¯•åˆ›å»ºæ¼”å”±ä¼šAPI"""
    concert_data = {
        "name": "å‘¨æ°ä¼¦æ¼”å”±ä¼š",
        "artist": "å‘¨æ°ä¼¦",
        "city": "åŒ—äº¬",
        "region": "mainland",
        "date": "2026-03-15T20:00:00+08:00",
        "address": "åŒ—äº¬å·¥äººä½“è‚²é¦†",
        "venue": "åŒ—äº¬å·¥äººä½“è‚²é¦†",
        "platform": "damai"
    }
    
    response = client.post("/api/concerts", json=concert_data)
    assert response.status_code == 200
    assert response.json()["name"] == "å‘¨æ°ä¼¦æ¼”å”±ä¼š"

def test_get_concert_not_found():
    """æµ‹è¯•è·å–ä¸å­˜åœ¨çš„æ¼”å”±ä¼š"""
    response = client.get("/api/concerts/999")
    assert response.status_code == 404
```

### 3.2 é›†æˆæµ‹è¯•

#### 3.2.1 æ•°æ®åº“é›†æˆæµ‹è¯•
```python
# tests/test_database.py
import pytest
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from src.api.models.concert import Concert
from src.database import Base

@pytest.fixture
def test_db():
    """æµ‹è¯•æ•°æ®åº“è¿æ¥"""
    engine = create_engine('sqlite:///test.db')
    Base.metadata.create_all(engine)
    Session = sessionmaker(bind=engine)
    session = Session()
    
    yield session
    
    session.close()
    import os
    os.remove('test.db')

@pytest.mark.asyncio
async def test_create_concert_in_db(test_db):
    """æµ‹è¯•åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ¼”å”±ä¼š"""
    concert = Concert(
        name="æµ‹è¯•æ¼”å”±ä¼š",
        artist="æµ‹è¯•æ­Œæ‰‹",
        city="åŒ—äº¬",
        region="mainland",
        date="2026-03-15T20:00:00+08:00",
        address="æµ‹è¯•åœ°å€",
        venue="æµ‹è¯•åœºé¦†",
        platform="damai"
    )
    
    test_db.add(concert)
    test_db.commit()
    
    # éªŒè¯æ•°æ®å·²ä¿å­˜
    saved_concert = test_db.query(Concert).filter(Concert.name == "æµ‹è¯•æ¼”å”±ä¼š").first()
    assert saved_concert is not None
    assert saved_concert.artist == "æµ‹è¯•æ­Œæ‰‹"
```

#### 3.2.2 APIé›†æˆæµ‹è¯•
```python
# tests/test_api_integration.py
import pytest
from fastapi.testclient import TestClient
from src.api.main import app

client = TestClient(app)

@pytest.mark.asyncio
async def test_concert_lifecycle():
    """æµ‹è¯•æ¼”å”±ä¼šå®Œæ•´ç”Ÿå‘½å‘¨æœŸ"""
    # åˆ›å»ºæ¼”å”±ä¼š
    concert_data = {
        "name": "é›†æˆæµ‹è¯•æ¼”å”±ä¼š",
        "artist": "é›†æˆæµ‹è¯•æ­Œæ‰‹",
        "city": "ä¸Šæµ·",
        "region": "mainland",
        "date": "2026-03-15T20:00:00+08:00",
        "address": "ä¸Šæµ·æµ‹è¯•åœºé¦†",
        "venue": "ä¸Šæµ·æµ‹è¯•åœºé¦†",
        "platform": "damai"
    }
    
    create_response = client.post("/api/concerts", json=concert_data)
    assert create_response.status_code == 200
    created_concert = create_response.json()
    concert_id = created_concert["id"]
    
    # è·å–æ¼”å”±ä¼š
    get_response = client.get(f"/api/concerts/{concert_id}")
    assert get_response.status_code == 200
    retrieved_concert = get_response.json()
    assert retrieved_concert["name"] == "é›†æˆæµ‹è¯•æ¼”å”±ä¼š"
    
    # æ›´æ–°æ¼”å”±ä¼š
    update_data = {"name": "æ›´æ–°åçš„æ¼”å”±ä¼š"}
    update_response = client.put(f"/api/concerts/{concert_id}", json=update_data)
    assert update_response.status_code == 200
    updated_concert = update_response.json()
    assert updated_concert["name"] == "æ›´æ–°åçš„æ¼”å”±ä¼š"
    
    # åˆ é™¤æ¼”å”±ä¼š
    delete_response = client.delete(f"/api/concerts/{concert_id}")
    assert delete_response.status_code == 200
    
    # éªŒè¯å·²åˆ é™¤
    get_response = client.get(f"/api/concerts/{concert_id}")
    assert get_response.status_code == 404
```

### 3.3 ç«¯åˆ°ç«¯æµ‹è¯•

#### 3.3.1 å‰ç«¯ç«¯åˆ°ç«¯æµ‹è¯•
```javascript
// tests/e2e/concerts.e2e.js
describe('æ¼”å”±ä¼šç®¡ç†', () => {
  beforeEach(() => {
    cy.visit('/concerts')
  })

  it('åº”è¯¥æ˜¾ç¤ºæ¼”å”±ä¼šåˆ—è¡¨', () => {
    cy.get('[data-testid="concert-list"]').should('be.visible')
    cy.get('[data-testid="concert-card"]').should('have.length', 0)
  })

  it('åº”è¯¥èƒ½å¤Ÿæœç´¢æ¼”å”±ä¼š', () => {
    cy.get('[data-testid="search-input"]').type('å‘¨æ°ä¼¦')
    cy.get('[data-testid="search-button"]').click()
    
    cy.get('[data-testid="concert-list"]').should('be.visible')
  })

  it('åº”è¯¥èƒ½å¤ŸæŸ¥çœ‹è¯¦æƒ…', () => {
    // å‡è®¾æœ‰ä¸€ä¸ªæ¼”å”±ä¼š
    cy.get('[data-testid="concert-card"]').first().click()
    
    cy.url().should('include', '/concerts/')
    cy.get('[data-testid="concert-detail"]').should('be.visible')
  })
})
```

#### 3.3.2 å®Œæ•´æµç¨‹æµ‹è¯•
```javascript
// tests/e2e/full-flow.e2e.js
describe('å®Œæ•´æµç¨‹æµ‹è¯•', () => {
  it('åº”è¯¥èƒ½å¤Ÿå®Œæˆæ¼”å”±ä¼šæœç´¢å’Œæ”¶è—', () => {
    // 1. è®¿é—®æ¼”å”±ä¼šé¡µé¢
    cy.visit('/concerts')
    
    // 2. æœç´¢æ¼”å”±ä¼š
    cy.get('[data-testid="search-input"]').type('å‘¨æ°ä¼¦')
    cy.get('[data-testid="search-button"]').click()
    
    // 3. ç‚¹å‡»æ¼”å”±ä¼šå¡ç‰‡
    cy.get('[data-testid="concert-card"]').first().click()
    
    // 4. æŸ¥çœ‹è¯¦æƒ…
    cy.get('[data-testid="concert-detail"]').should('be.visible')
    
    // 5. æ”¶è—æ¼”å”±ä¼š
    cy.get('[data-testid="favorite-button"]').click()
    
    // 6. éªŒè¯æ”¶è—æˆåŠŸ
    cy.get('[data-testid="favorite-success"]').should('be.visible')
  })
})
```

### 3.4 æ€§èƒ½æµ‹è¯•

#### 3.4.1 è´Ÿè½½æµ‹è¯•
```javascript
// tests/performance/load-test.js
import http from 'k6/http'
import { check, sleep } from 'k6'

export const options = {
  stages: [
    { duration: '5m', target: 100 },  // 5åˆ†é’Ÿè¾¾åˆ°100ç”¨æˆ·
    { duration: '10m', target: 100 }, // 10åˆ†é’Ÿä¿æŒ100ç”¨æˆ·
    { duration: '5m', target: 0 },    // 5åˆ†é’Ÿé€æ¸å‡å°‘åˆ°0
  ],
  thresholds: {
    'http_req_duration': ['p(95)<200'], // 95%çš„è¯·æ±‚å“åº”æ—¶é—´å°äº200ms
    'http_req_failed': ['rate<0.01'],   // é”™è¯¯ç‡å°äº1%
  }
}

export default function () {
  const response = http.get('http://localhost:8000/api/concerts')
  
  check(response, {
    'status is 200': (r) => r.status === 200,
    'response time is acceptable': (r) => r.timings.duration < 200,
  })
  
  sleep(1)
}
```

#### 3.4.2 å‹åŠ›æµ‹è¯•
```javascript
// tests/performance/stress-test.js
import http from 'k6/http'
import { check, sleep } from 'k6'

export const options = {
  stages: [
    { duration: '1m', target: 200 },  // 1åˆ†é’Ÿè¾¾åˆ°200ç”¨æˆ·
    { duration: '2m', target: 200 },  // 2åˆ†é’Ÿä¿æŒ200ç”¨æˆ·
    { duration: '1m', target: 0 },    // 1åˆ†é’Ÿé€æ¸å‡å°‘åˆ°0
  ],
  thresholds: {
    'http_req_duration': ['p(95)<500'], // 95%çš„è¯·æ±‚å“åº”æ—¶é—´å°äº500ms
    'http_req_failed': ['rate<0.05'],   // é”™è¯¯ç‡å°äº5%
  }
}

export default function () {
  const response = http.get('http://localhost:8000/api/concerts')
  
  check(response, {
    'status is 200': (r) => r.status === 200,
  })
  
  sleep(1)
}
```

## 4. æµ‹è¯•è‡ªåŠ¨åŒ–

### 4.1 CI/CDé›†æˆ

#### 4.1.1 GitHub Actions
```yaml
# .github/workflows/test.yml
name: Test and Quality

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    
    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '16'
    
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
        npm install
    
    - name: Run unit tests
      run: |
        pytest tests/ --cov=src --cov-report=xml
        
    - name: Run integration tests
      run: |
        pytest tests/integration/ --cov=src --cov-report=xml
        
    - name: Upload coverage to Codecov
      uses: codecov/codecov-action@v3
      with:
        file: ./coverage.xml
```

#### 4.1.2 GitLab CI
```yaml
# .gitlab-ci.yml
stages:
  - test
  - build
  - deploy

unit_tests:
  stage: test
  script:
    - pip install -r requirements.txt
    - pytest tests/unit/ --cov=src --cov-report=html
    - coverage report --fail-under=85

integration_tests:
  stage: test
  script:
    - pip install -r requirements.txt
    - pytest tests/integration/ --cov=src --cov-report=html
    - coverage report --fail-under=80

e2e_tests:
  stage: test
  script:
    - npm install
    - npm run test:e2e

performance_tests:
  stage: test
  script:
    - npm install -g k6
    - k6 run tests/performance/load-test.js
    - k6 run tests/performance/stress-test.js

build:
  stage: build
  script:
    - docker build -t music-vocal-concert:$CI_COMMIT_SHA .
    - docker push music-vocal-concert:$CI_COMMIT_SHA

deploy_staging:
  stage: deploy
  script:
    - kubectl apply -f k8s/staging/
  environment:
    name: staging
    url: https://staging.music-vocal-concert.com

deploy_production:
  stage: deploy
  script:
    - kubectl apply -f k8s/production/
  environment:
    name: production
    url: https://music-vocal-concert.com
  when: manual
```

### 4.2 æµ‹è¯•æŠ¥å‘Š

#### 4.2.1 æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
```bash
# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
# Pythonæµ‹è¯•æŠ¥å‘Š
pytest tests/ --cov=src --cov-report=html --cov-report=xml --junitxml=test-results.xml

# JavaScriptæµ‹è¯•æŠ¥å‘Š
npm test -- --coverage --reporters=default --reporters=jest-junit

# åˆå¹¶æŠ¥å‘Š
# ä½¿ç”¨Allureç”Ÿæˆç»¼åˆæŠ¥å‘Š
allure generate allure-results --clean -o allure-report
```

#### 4.2.2 è´¨é‡æŠ¥å‘Š
```python
# ç”Ÿæˆè´¨é‡æŠ¥å‘Š
class QualityReport:
    def __init__(self):
        self.metrics = {}

    def collect_metrics(self):
        """æ”¶é›†è´¨é‡æŒ‡æ ‡"""
        # ä»£ç è¦†ç›–ç‡
        self.metrics['coverage'] = self._get_coverage()
        
        # ä»£ç å¤æ‚åº¦
        self.metrics['complexity'] = self._get_complexity()
        
        # æµ‹è¯•é€šè¿‡ç‡
        self.metrics['test_pass_rate'] = self._get_test_pass_rate()
        
        # å®‰å…¨æ¼æ´
        self.metrics['security_vulnerabilities'] = self._get_security_vulnerabilities()

    def _get_coverage(self) -> float:
        """è·å–ä»£ç è¦†ç›–ç‡"""
        # å®ç°è¦†ç›–ç‡è·å–
        return 85.0

    def _get_complexity(self) -> dict:
        """è·å–ä»£ç å¤æ‚åº¦"""
        # å®ç°å¤æ‚åº¦è·å–
        return {'average': 5.2, 'max': 15}

    def _get_test_pass_rate(self) -> float:
        """è·å–æµ‹è¯•é€šè¿‡ç‡"""
        # å®ç°æµ‹è¯•é€šè¿‡ç‡è·å–
        return 97.5

    def _get_security_vulnerabilities(self) -> dict:
        """è·å–å®‰å…¨æ¼æ´"""
        # å®ç°å®‰å…¨æ¼æ´è·å–
        return {'critical': 0, 'high': 0, 'medium': 1, 'low': 2}

    def generate_report(self) -> dict:
        """ç”Ÿæˆè´¨é‡æŠ¥å‘Š"""
        self.collect_metrics()
        
        return {
            'timestamp': datetime.now().isoformat(),
            'metrics': self.metrics,
            'status': self._get_overall_status(),
            'recommendations': self._get_recommendations()
        }

    def _get_overall_status(self) -> str:
        """è·å–æ•´ä½“çŠ¶æ€"""
        if self.metrics['coverage'] >= 85 and \
           self.metrics['test_pass_rate'] >= 95 and \
           self.metrics['security_vulnerabilities']['critical'] == 0:
            return 'PASS'
        else:
            return 'FAIL'

    def _get_recommendations(self) -> list:
        """è·å–æ”¹è¿›å»ºè®®"""
        recommendations = []
        
        if self.metrics['coverage'] < 85:
            recommendations.append('æé«˜ä»£ç è¦†ç›–ç‡åˆ°85%ä»¥ä¸Š')
        
        if self.metrics['test_pass_rate'] < 95:
            recommendations.append('æé«˜æµ‹è¯•é€šè¿‡ç‡åˆ°95%ä»¥ä¸Š')
        
        if self.metrics['security_vulnerabilities']['critical'] > 0:
            recommendations.append('ä¿®å¤æ‰€æœ‰é«˜å±å®‰å…¨æ¼æ´')
        
        return recommendations
```

## 5. è´¨é‡ä¿éšœ

### 5.1 è´¨é‡é—¨ç¦æ£€æŸ¥è¡¨

#### 5.1.1 ä»£ç æäº¤å‰æ£€æŸ¥
```bash
# ä»£ç æäº¤å‰æ£€æŸ¥è„šæœ¬
#!/bin/bash

echo "ğŸ” æ‰§è¡Œä»£ç æäº¤å‰æ£€æŸ¥..."

# 1. ä»£ç æ ¼å¼åŒ–æ£€æŸ¥
echo "æ£€æŸ¥ä»£ç æ ¼å¼åŒ–..."
npm run format:check
if [ $? -ne 0 ]; then
    echo "âŒ ä»£ç æ ¼å¼åŒ–æ£€æŸ¥å¤±è´¥"
    exit 1
fi

# 2. ä»£ç è§„èŒƒæ£€æŸ¥
echo "æ£€æŸ¥ä»£ç è§„èŒƒ..."
npm run lint
if [ $? -ne 0 ]; then
    echo "âŒ ä»£ç è§„èŒƒæ£€æŸ¥å¤±è´¥"
    exit 1
fi

# 3. å•å…ƒæµ‹è¯•æ£€æŸ¥
echo "è¿è¡Œå•å…ƒæµ‹è¯•..."
npm test -- --watchAll=false
if [ $? -ne 0 ]; then
    echo "âŒ å•å…ƒæµ‹è¯•æ£€æŸ¥å¤±è´¥"
    exit 1
fi

# 4. ä»£ç è¦†ç›–ç‡æ£€æŸ¥
echo "æ£€æŸ¥ä»£ç è¦†ç›–ç‡..."
npm test -- --coverage --coverage-threshold='85%'
if [ $? -ne 0 ]; then
    echo "âŒ ä»£ç è¦†ç›–ç‡æ£€æŸ¥å¤±è´¥"
    exit 1
fi

echo "âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œå¯ä»¥æäº¤ä»£ç "
```

#### 5.1.2 CI/CDæ£€æŸ¥
```bash
# CI/CDæ£€æŸ¥è„šæœ¬
#!/bin/bash

echo "ğŸš€ æ‰§è¡ŒCI/CDæ£€æŸ¥..."

# 1. æ„å»ºæ£€æŸ¥
echo "æ„å»ºé¡¹ç›®..."
npm run build
if [ $? -ne 0 ]; then
    echo "âŒ æ„å»ºæ£€æŸ¥å¤±è´¥"
    exit 1
fi

# 2. é›†æˆæµ‹è¯•
echo "è¿è¡Œé›†æˆæµ‹è¯•..."
pytest tests/integration/ --cov=src --cov-report=html
if [ $? -ne 0 ]; then
    echo "âŒ é›†æˆæµ‹è¯•æ£€æŸ¥å¤±è´¥"
    exit 1
fi

# 3. ç«¯åˆ°ç«¯æµ‹è¯•
echo "è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•..."
npm run test:e2e
if [ $? -ne 0 ]; then
    echo "âŒ ç«¯åˆ°ç«¯æµ‹è¯•æ£€æŸ¥å¤±è´¥"
    exit 1
fi

# 4. æ€§èƒ½æµ‹è¯•
echo "è¿è¡Œæ€§èƒ½æµ‹è¯•..."
k6 run tests/performance/load-test.js
if [ $? -ne 0 ]; then
    echo "âŒ æ€§èƒ½æµ‹è¯•æ£€æŸ¥å¤±è´¥"
    exit 1
fi

echo "âœ… æ‰€æœ‰CI/CDæ£€æŸ¥é€šè¿‡"
```

### 5.2 è´¨é‡ç›‘æ§

#### 5.2.1 å®æ—¶ç›‘æ§
```python
# è´¨é‡ç›‘æ§
import logging
from datetime import datetime

class QualityMonitor:
    def __init__(self):
        self.logger = logging.getLogger('quality_monitor')

    def monitor_quality_metrics(self) -> dict:
        """ç›‘æ§è´¨é‡æŒ‡æ ‡"""
        metrics = {
            'timestamp': datetime.now().isoformat(),
            'code_coverage': self._get_coverage(),
            'test_pass_rate': self._get_test_pass_rate(),
            'security_score': self._get_security_score(),
            'performance_score': self._get_performance_score()
        }
        
        # è®°å½•è´¨é‡æŒ‡æ ‡
        self.logger.info(f"Quality metrics: {metrics}")
        
        # æ£€æŸ¥è´¨é‡é—¨ç¦
        if not self._passes_quality_gates(metrics):
            self.logger.error("Quality gates failed")
            # å‘é€å‘Šè­¦
            self._send_quality_alert(metrics)
        
        return metrics

    def _get_coverage(self) -> float:
        """è·å–ä»£ç è¦†ç›–ç‡"""
        # å®ç°è¦†ç›–ç‡è·å–
        return 85.0

    def _get_test_pass_rate(self) -> float:
        """è·å–æµ‹è¯•é€šè¿‡ç‡"""
        # å®ç°æµ‹è¯•é€šè¿‡ç‡è·å–
        return 97.5

    def _get_security_score(self) -> float:
        """è·å–å®‰å…¨è¯„åˆ†"""
        # å®ç°å®‰å…¨è¯„åˆ†è·å–
        return 95.0

    def _get_performance_score(self) -> float:
        """è·å–æ€§èƒ½è¯„åˆ†"""
        # å®ç°æ€§èƒ½è¯„åˆ†è·å–
        return 90.0

    def _passes_quality_gates(self, metrics: dict) -> bool:
        """æ£€æŸ¥æ˜¯å¦é€šè¿‡è´¨é‡é—¨ç¦"""
        return (
            metrics['code_coverage'] >= 85 and
            metrics['test_pass_rate'] >= 95 and
            metrics['security_score'] >= 90 and
            metrics['performance_score'] >= 80
        )

    def _send_quality_alert(self, metrics: dict):
        """å‘é€è´¨é‡å‘Šè­¦"""
        # å®ç°å‘Šè­¦å‘é€
        pass
```

#### 5.2.2 å®šæœŸæŠ¥å‘Š
```python
# å®šæœŸè´¨é‡æŠ¥å‘Š
class QualityReporter:
    def __init__(self):
        self.monitor = QualityMonitor()

    def generate_daily_report(self) -> dict:
        """ç”Ÿæˆæ¯æ—¥è´¨é‡æŠ¥å‘Š"""
        metrics = self.monitor.monitor_quality_metrics()
        
        report = {
            'date': datetime.now().date().isoformat(),
            'metrics': metrics,
            'trends': self._get_trends(),
            'issues': self._get_recent_issues(),
            'recommendations': self._get_recommendations()
        }
        
        return report

    def _get_trends(self) -> dict:
        """è·å–è¶‹åŠ¿åˆ†æ"""
        # å®ç°è¶‹åŠ¿åˆ†æ
        return {
            'coverage_trend': '+2%',
            'test_pass_rate_trend': '-0.5%',
            'security_score_trend': '+1%'
        }

    def _get_recent_issues(self) -> list:
        """è·å–æœ€è¿‘é—®é¢˜"""
        # å®ç°é—®é¢˜è·å–
        return [
            {
                'type': 'test_failure',
                'description': 'é›†æˆæµ‹è¯•å¤±è´¥',
                'severity': 'high',
                'timestamp': '2026-02-08T10:30:00'
            }
        ]

    def _get_recommendations(self) -> list:
        """è·å–æ”¹è¿›å»ºè®®"""
        # å®ç°å»ºè®®ç”Ÿæˆ
        return [
            'æé«˜ä»£ç è¦†ç›–ç‡åˆ°90%',
            'ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œæ—¶é—´',
            'åŠ å¼ºå®‰å…¨æ‰«æ'
        ]
```

## 6. é™„å½•

### 6.1 æµ‹è¯•å·¥å…·
- **pytest**: Pythonå•å…ƒæµ‹è¯•æ¡†æ¶
- **Jest**: JavaScriptå•å…ƒæµ‹è¯•æ¡†æ¶
- **Cypress**: ç«¯åˆ°ç«¯æµ‹è¯•æ¡†æ¶
- **k6**: æ€§èƒ½æµ‹è¯•å·¥å…·
- **JMeter**: è´Ÿè½½æµ‹è¯•å·¥å…·
- **Selenium**: Webè‡ªåŠ¨åŒ–æµ‹è¯•

### 6.2 è´¨é‡å·¥å…·
- **SonarQube**: ä»£ç è´¨é‡ç®¡ç†
- **Codecov**: ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
- **Snyk**: å®‰å…¨æ¼æ´æ‰«æ
- **Bandit**: Pythonå®‰å…¨æ‰«æ
- **ESLint**: JavaScriptä»£ç æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–

### 6.3 å‚è€ƒæ–‡æ¡£
- **ISTQBæµ‹è¯•æ ‡å‡†**: å›½é™…è½¯ä»¶æµ‹è¯•æ ‡å‡†
- **IEEE 829æµ‹è¯•æ–‡æ¡£**: æµ‹è¯•æ–‡æ¡£æ ‡å‡†
- **ISO/IEC 25010è´¨é‡æ¨¡å‹**: è½¯ä»¶äº§å“è´¨é‡æ¨¡å‹
- **NISTç½‘ç»œå®‰å…¨æ¡†æ¶**: ç½‘ç»œå®‰å…¨æ ‡å‡†

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¶é—´**: 2026-02-08
**æœ€åæ›´æ–°**: 2026-02-08 23:57:00